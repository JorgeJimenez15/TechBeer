=[""],e=i,s,n=()=>i[0]){K(s)||(s=As("_fallback",i));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:e,_fallback:s,_getTarget:n,override:r=>ti([r,...i],t,e,s)};return new Proxy(o,{deleteProperty(r,a){return delete r[a],delete r._keys,delete i[0][a],!0},get(r,a){return Ls(r,a,()=>Co(a,t,i,r))},getOwnPropertyDescriptor(r,a){return Reflect.getOwnPropertyDescriptor(r._scopes[0],a)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(r,a){return Pi(r).includes(a)},ownKeys(r){return Pi(r)},set(r,a,c){const l=r._storage||(r._storage=n());return r[a]=l[a]=c,delete r._keys,!0}})}function wt(i,t,e,s){const n={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:Ts(i,s),setContext:o=>wt(i,o,e,s),override:o=>wt(i.override(o),t,e,s)};return new Proxy(n,{deleteProperty(o,r){return delete o[r],delete i[r],!0},get(o,r,a){return Ls(o,r,()=>Mo(o,r,a))},getOwnPropertyDescriptor(o,r){return o._descriptors.allKeys?Reflect.has(i,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,r)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(o,r){return Reflect.has(i,r)},ownKeys(){return Reflect.ownKeys(i)},set(o,r,a){return i[r]=a,delete o[r],!0}})}function Ts(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=i;return{allKeys:n,scriptable:e,indexable:s,isScriptable:at(e)?e:()=>e,isIndexable:at(s)?s:()=>s}}const vo=(i,t)=>i?i+Ge(t):t,ei=(i,t)=>O(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Ls(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t))return i[t];const s=e();return i[t]=s,s}function Mo(i,t,e){const{_proxy:s,_context:n,_subProxy:o,_descriptors:r}=i;let a=s[t];return at(a)&&r.isScriptable(t)&&(a=wo(t,a,i,e)),E(a)&&a.length&&(a=So(t,a,i,r.isIndexable)),ei(t,a)&&(a=wt(a,n,o&&o[t],r)),a}function wo(i,t,e,s){const{_proxy:n,_context:o,_subProxy:r,_stack:a}=e;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);return a.add(i),t=t(o,r||s),a.delete(i),ei(i,t)&&(t=ii(n._scopes,n,i,t)),t}function So(i,t,e,s){const{_proxy:n,_context:o,_subProxy:r,_descriptors:a}=e;if(K(o.index)&&s(i))t=t[o.index%t.length];else if(O(t[0])){const c=t,l=n._scopes.filter(h=>h!==c);t=[];for(const h of c){const d=ii(l,n,i,h);t.push(wt(d,o,r&&r[i],a))}}return t}function Is(i,t,e){return at(i)?i(t,e):i}const Po=(i,t)=>i===!0?t:typeof i=="string"?ye(t,i):void 0;function Oo(i,t,e,s,n){for(const o of t){const r=Po(e,o);if(r){i.add(r);const a=Is(r._fallback,e,n);if(K(a)&&a!==e&&a!==s)return a}else if(r===!1&&K(s)&&e!==s)return null}return!1}function ii(i,t,e,s){const n=t._rootScopes,o=Is(t._fallback,e,s),r=[...i,...n],a=new Set;a.add(s);let c=Si(a,r,e,o||e,s);return c===null||K(o)&&o!==e&&(c=Si(a,r,o,c,s),c===null)?!1:ti(Array.from(a),[""],n,o,()=>Do(t,e,s))}function Si(i,t,e,s,n){for(;e;)e=Oo(i,t,e,s,n);return e}function Do(i,t,e){const s=i._getTarget();t in s||(s[t]={});const n=s[t];return E(n)&&O(e)?e:n||{}}function Co(i,t,e,s){let n;for(const o of t)if(n=As(vo(o,i),e),K(n))return ei(i,n)?ii(e,s,i,n):n}function As(i,t){for(const e of t){if(!e)continue;const s=e[i];if(K(s))return s}}function Pi(i){let t=i._keys;return t||(t=i._keys=To(i._scopes)),t}function To(i){const t=new Set;for(const e of i)for(const s of Object.keys(e).filter(n=>!n.startsWith("_")))t.add(s);return Array.from(t)}const Lo=Number.EPSILON||1e-14,St=(i,t)=>t<i.length&&!i[t].skip&&i[t],Es=i=>i==="x"?"y":"x";function Io(i,t,e,s){const n=i.skip?t:i,o=t,r=e.skip?t:e,a=bi(o,n),c=bi(r,o);let l=a/(a+c),h=c/(a+c);l=isNaN(l)?0:l,h=isNaN(h)?0:h;const d=s*l,f=s*h;return{previous:{x:o.x-d*(r.x-n.x),y:o.y-d*(r.y-n.y)},next:{x:o.x+f*(r.x-n.x),y:o.y+f*(r.y-n.y)}}}function Ao(i,t,e){const s=i.length;let n,o,r,a,c,l=St(i,0);for(let h=0;h<s-1;++h)if(c=l,l=St(i,h+1),!(!c||!l)){if(Vt(t[h],0,Lo)){e[h]=e[h+1]=0;continue}n=e[h]/t[h],o=e[h+1]/t[h],a=Math.pow(n,2)+Math.pow(o,2),!(a<=9)&&(r=3/Math.sqrt(a),e[h]=n*r*t[h],e[h+1]=o*r*t[h])}}function Eo(i,t,e="x"){const s=Es(e),n=i.length;let o,r,a,c=St(i,0);for(let l=0;l<n;++l