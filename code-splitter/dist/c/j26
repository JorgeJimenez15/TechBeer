eight?n.index-o.index:n.weight-o.weight})}function vr(i){const t=[];let e,s,n,o,r,a;for(e=0,s=(i||[]).length;e<s;++e)n=i[e],{position:o,options:{stack:r,stackWeight:a=1}}=n,t.push({index:e,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:r&&o+r,stackWeight:a});return t}function Mr(i){const t={};for(const e of i){const{stack:s,pos:n,stackWeight:o}=e;if(!s||!Ns.includes(n))continue;const r=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=o}return t}function wr(i,t){const e=Mr(i),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t;let o,r,a;for(o=0,r=i.length;o<r;++o){a=i[o];const{fullSize:c}=a.box,l=e[a.stack],h=l&&a.stackWeight/l.weight;a.horizontal?(a.width=h?h*s:c&&t.availableWidth,a.height=n):(a.width=s,a.height=h?h*n:c&&t.availableHeight)}return e}function Sr(i){const t=vr(i),e=At(t.filter(l=>l.box.fullSize),!0),s=At(It(t,"left"),!0),n=At(It(t,"right")),o=At(It(t,"top"),!0),r=At(It(t,"bottom")),a=Vi(t,"x"),c=Vi(t,"y");return{fullSize:e,leftAndTop:s.concat(o),rightAndBottom:n.concat(c).concat(r).concat(a),chartArea:It(t,"chartArea"),vertical:s.concat(n).concat(c),horizontal:o.concat(r).concat(a)}}function ji(i,t,e,s){return Math.max(i[e],t[e])+Math.max(i[s],t[s])}function Bs(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function Pr(i,t,e,s){const{pos:n,box:o}=e,r=i.maxPadding;if(!O(n)){e.size&&(i[n]-=e.size);const d=s[e.stack]||{size:0,count:1};d.size=Math.max(d.size,e.horizontal?o.height:o.width),e.size=d.size/d.count,i[n]+=e.size}o.getPadding&&Bs(r,o.getPadding());const a=Math.max(0,t.outerWidth-ji(r,i,"left","right")),c=Math.max(0,t.outerHeight-ji(r,i,"top","bottom")),l=a!==i.w,h=c!==i.h;return i.w=a,i.h=c,e.horizontal?{same:l,other:h}:{same:h,other:l}}function Or(i){const t=i.maxPadding;function e(s){const n=Math.max(t[s]-i[s],0);return i[s]+=n,n}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function Dr(i,t){const e=t.maxPadding;function s(n){const o={left:0,top:0,right:0,bottom:0};return n.forEach(r=>{o[r]=Math.max(t[r],e[r])}),o}return s(i?["left","right"]:["top","bottom"])}function zt(i,t,e,s){const n=[];let o,r,a,c,l,h;for(o=0,r=i.length,l=0;o<r;++o){a=i[o],c=a.box,c.update(a.width||t.w,a.height||t.h,Dr(a.horizontal,t));const{same:d,other:f}=Pr(t,e,a,s);l|=d&&n.length,h=h||f,c.fullSize||n.push(a)}return l&&zt(n,t,e,s)||h}function ce(i,t,e,s,n){i.top=e,i.left=t,i.right=t+s,i.bottom=e+n,i.width=s,i.height=n}function Wi(i,t,e,s){const n=e.padding;let{x:o,y:r}=t;for(const a of i){const c=a.box,l=s[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/l.weight||1;if(a.horizontal){const d=t.w*h,f=l.size||c.height;K(l.start)&&(r=l.start),c.fullSize?ce(c,n.left,r,e.outerWidth-n.right-n.left,f):ce(c,t.left+l.placed,r,d,f),l.start=r,l.placed+=d,r=c.bottom}else{const d=t.h*h,f=l.size||c.width;K(l.start)&&(o=l.start),c.fullSize?ce(c,o,n.top,f,e.outerHeight-n.bottom-n.top):ce(c,o,t.top+l.placed,f,d),l.start=o,l.placed+=d,o=c.right}}t.x=o,t.y=r}var le={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,s){if(!i)return;const n=et(i.options.layout.padding),o=Math.max(t-n.width,0),r=Math.max(e-n.height,0),a=Sr(i.boxes),c=a.vertical,l=a.horizontal;V(i.boxes,p=>{typeof p.beforeLayout=="function"&&p.beforeLayout()});const h=c.reduce((p,g)=>g.box.options&&g.box.options.display===!1?p:p+1,0)||1,d=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/h,hBoxMaxHeight:r/2}),f=Object.assign({},n);Bs(f,et(s));const u=Object.assign({maxPadding:f,w:o,h:r,x:n.left,y:n.top},n),m=wr(c.concat(l),d);zt(a.fullSize,u,d,m),zt(c,u,d,m),zt(l,u,d,m)&&zt(c,u,d,m),Or(u),Wi(a.leftAndTop,u,d,m),u.x+=u.w,u.y+=u.h,Wi(a.rightAndBottom,u,d,m),i.chartArea={left:u.left,top:u.top,right:u.left+